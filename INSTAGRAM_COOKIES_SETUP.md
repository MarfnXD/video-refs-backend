# Como Configurar Cookies do Instagram

Este guia explica como extrair os cookies da sua sess√£o do Instagram e configur√°-los no backend para evitar rate-limit.

## üç™ Por que precisamos de cookies?

O Instagram bloqueia downloads em massa quando n√£o est√° autenticado. Ao fornecer os cookies da sua sess√£o logada, o backend pode fazer downloads como se fosse voc√™, evitando bloqueios.

## üìã Passo a Passo

### 1. Instalar Extens√£o para Extrair Cookies

Instale uma das extens√µes abaixo no Chrome/Edge/Firefox:

- **Get cookies.txt LOCALLY** (Chrome/Edge): https://chrome.google.com/webstore/detail/get-cookiestxt-locally/cclelndahbckbenkjhflpdbgdldlbecc
- **cookies.txt** (Firefox): https://addons.mozilla.org/en-US/firefox/addon/cookies-txt/

### 2. Logar no Instagram

1. Abra o navegador
2. Acesse https://www.instagram.com
3. Fa√ßa login na sua conta
4. Navegue at√© qualquer reel/post (para garantir que os cookies est√£o ativos)

### 3. Exportar Cookies

1. Clique no √≠cone da extens√£o instalada
2. Clique em "Export cookies" ou "Download cookies"
3. Isso vai baixar um arquivo `instagram.com_cookies.txt` (ou similar)

### 4. Copiar Conte√∫do dos Cookies

Abra o arquivo baixado em um editor de texto. O conte√∫do deve ser algo assim:

```
# Netscape HTTP Cookie File
# This file was generated by cookies.txt LOCALLY for get-cookies-txt-locally
.instagram.com	TRUE	/	TRUE	1234567890	sessionid	123abc456def789...
.instagram.com	TRUE	/	TRUE	1234567890	csrftoken	xyz789abc123...
```

**COPIE TODO O CONTE√öDO DO ARQUIVO** (incluindo os coment√°rios com `#`).

### 5. Configurar no Render (Produ√ß√£o)

1. Acesse o dashboard do Render: https://dashboard.render.com
2. Encontre o servi√ßo `video-refs-backend`
3. V√° em **Environment** ‚Üí **Environment Variables**
4. Procure pela vari√°vel `INSTAGRAM_COOKIES` (ou crie uma nova)
5. Cole TODO o conte√∫do do arquivo de cookies no campo de valor
6. Salve

O backend vai reiniciar automaticamente e come√ßar a usar os cookies.

### 6. Testar

Tente baixar alguns v√≠deos do Instagram em lote. Agora deve funcionar sem rate-limit! üéâ

## ‚ö†Ô∏è Importante

- **Seguran√ßa**: Nunca compartilhe seus cookies publicamente (eles d√£o acesso √† sua conta!)
- **Validade**: Os cookies do Instagram expiram ap√≥s algumas semanas/meses. Se come√ßar a dar erro novamente, repita o processo.
- **M√∫ltiplas contas**: Se voc√™ quiser usar uma conta separada para downloads, crie uma nova conta no Instagram e use os cookies dela.

## üîÑ Desenvolvimento Local

Se voc√™ quiser testar localmente antes de configurar no Render:

1. Crie um arquivo `backend/.env.local`
2. Adicione a linha:
   ```
   INSTAGRAM_COOKIES="<cole aqui todo o conte√∫do do arquivo de cookies>"
   ```
3. Reinicie o backend local

## üìù Formato Alternativo (se o acima n√£o funcionar)

Se o m√©todo acima n√£o funcionar, voc√™ pode tentar extrair apenas os cookies essenciais em formato JSON:

```json
[
  {"name": "sessionid", "value": "SEU_SESSION_ID_AQUI"},
  {"name": "csrftoken", "value": "SEU_CSRF_TOKEN_AQUI"}
]
```

Mas o formato Netscape (arquivo .txt) √© prefer√≠vel porque o yt-dlp j√° aceita nativamente.

## üÜò Troubleshooting

**Problema**: Downloads ainda est√£o sendo bloqueados
- **Solu√ß√£o 1**: Verifique se os cookies foram colados corretamente (sem quebras de linha extras)
- **Solu√ß√£o 2**: Fa√ßa logout e login novamente no Instagram, depois re-exporte os cookies
- **Solu√ß√£o 3**: Tente usar outra conta do Instagram

**Problema**: Cookies expiraram
- **Solu√ß√£o**: Re-exporte os cookies seguindo os passos 2-5 novamente

## ‚úÖ Como Saber se Est√° Funcionando?

Quando os cookies estiverem configurados corretamente, voc√™ ver√° no log do backend:

```
üç™ Usando cookies do Instagram configurados
```

E os downloads devem funcionar normalmente! üöÄ
